<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>éŠ€é«®æ—é»é¤æ¨¡æ“¬ç·´ç¿’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: "Microsoft JhengHei", "PingFang TC", sans-serif; 
            overscroll-behavior: none;
            -webkit-tap-highlight-color: transparent;
        }
        .btn-active:active { transform: scale(0.95); }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <!-- è¼‰å…¥æ ¸å¿ƒåº« -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            // ç‹€æ…‹ç®¡ç†
            const [step, setStep] = useState('welcome'); // welcome, ordering, checkout, success
            const [cart, setCart] = useState([]);
            const [category, setCategory] = useState('ä¸»é£Ÿ');
            const [isTakeout, setIsTakeout] = useState(null);
            const [paymentMethod, setPaymentMethod] = useState(null);

            const menu = {
                'ä¸»é£Ÿ': [
                    { id: 1, name: 'æ‹›ç‰Œæ’éª¨é£¯', price: 100, emoji: 'ğŸ±' },
                    { id: 2, name: 'æ¸…è’¸é±ˆé­šé£¯', price: 120, emoji: 'ğŸŸ' },
                    { id: 3, name: 'å¤æ—©å‘³æ»·è‚‰é£¯', price: 50, emoji: 'ğŸš' },
                ],
                'é£²å“': [
                    { id: 4, name: 'å¤æ—©å‘³ç´…èŒ¶', price: 30, emoji: 'ğŸ¥¤' },
                    { id: 5, name: 'ç†±ç¾å¼å’–å•¡', price: 45, emoji: 'â˜•' },
                    { id: 6, name: 'æº«ç†±è±†æ¼¿', price: 25, emoji: 'ğŸ¥›' },
                ]
            };

            const addToCart = (item) => {
                const exist = cart.find(x => x.id === item.id);
                if (exist) {
                    setCart(cart.map(x => x.id === item.id ? { ...x, qty: x.qty + 1 } : x));
                } else {
                    setCart([...cart, { ...item, qty: 1 }]);
                }
            };

            const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);

            // 1. æ­¡è¿é é¢
            if (step === 'welcome') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen p-6 bg-blue-600 text-white text-center">
                        <div className="mb-8">
                            <span className="text-8xl">ğŸ±</span>
                        </div>
                        <h1 className="text-5xl font-black mb-4">é»é¤æ¨¡æ“¬ç·´ç¿’</h1>
                        <p className="text-xl opacity-90 mb-12 text-blue-100">ç°¡å–®æŒ‰ä¸€æŒ‰ï¼Œç·´ç¿’è‡ªå·±é»é¤</p>
                        <button 
                            onClick={() => setStep('ordering')}
                            className="bg-yellow-400 text-blue-900 text-3xl font-black py-6 px-16 rounded-full shadow-2xl btn-active"
                        >
                            æŒ‰é€™è£¡é–‹å§‹
                        </button>
                    </div>
                );
            }

            // 2. é»é¤é é¢
            if (step === 'ordering') {
                return (
                    <div className="flex flex-col h-screen max-w-md mx-auto bg-white overflow-hidden">
                        {/* é ‚éƒ¨æ¨™é¡Œ */}
                        <div className="bg-blue-600 text-white p-4 flex justify-between items-center shrink-0">
                            <h2 className="text-2xl font-bold italic">å®‰å¿ƒå¤§é£¯åº—</h2>
                            <div className="bg-blue-800 px-3 py-1 rounded-full text-sm">é»é¤ä¸­</div>
                        </div>

                        {/* ä¸»å…§å®¹å€ */}
                        <div className="flex flex-1 overflow-hidden">
                            {/* å·¦å´é¸å–® */}
                            <div className="w-28 bg-gray-100 flex flex-col border-r border-gray-200 shrink-0">
                                {Object.keys(menu).map(cat => (
                                    <button 
                                        key={cat} 
                                        onClick={() => setCategory(cat)}
                                        className={`flex-1 text-xl font-black transition-colors ${category === cat ? 'bg-white text-blue-600 border-l-8 border-blue-600' : 'text-gray-400'}`}
                                    >
                                        {cat}
                                    </button>
                                ))}
                            </div>

                            {/* å³å´å•†å“åˆ—è¡¨ */}
                            <div className="flex-1 p-4 overflow-y-auto space-y-4 bg-gray-50">
                                {menu[category].map(item => (
                                    <div key={item.id} className="bg-white rounded-3xl p-4 shadow-sm flex items-center border-2 border-transparent hover:border-blue-200 transition-all">
                                        <div className="text-5xl mr-4">{item.emoji}</div>
                                        <div className="flex-1">
                                            <div className="text-xl font-bold text-gray-800">{item.name}</div>
                                            <div className="text-red-500 font-black text-2xl">${item.price}</div>
                                        </div>
                                        <button 
                                            onClick={() => addToCart(item)}
                                            className="bg-blue-500 text-white w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg btn-active"
                                        >
                                            <span className="text-3xl font-bold">+</span>
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* åº•éƒ¨è³¼ç‰©è»Šé è¦½å€ */}
                        <div className="p-4 bg-white border-t-4 border-gray-100 shadow-up">
                            <div className="flex justify-between items-end mb-4 px-2">
                                <div>
                                    <span className="text-gray-500 text-lg block">ç¸½å…±ï¼š</span>
                                    <span className="text-3xl font-black text-blue-600">${total}</span>
                                </div>
                                <div className="text-gray-400 text-sm">å·²é¸ {cart.length} æ¨£é …ç›®</div>
                            </div>
                            <button 
                                onClick={() => {
                                    console.log("åˆ‡æ›è‡³çµå¸³ç•«é¢");
                                    setStep('checkout');
                                }}
                                disabled={cart.length === 0}
                                className={`w-full py-5 rounded-3xl text-3xl font-black transition-all shadow-xl btn-active ${cart.length > 0 ? 'bg-green-500 text-white animate-pulse' : 'bg-gray-300 text-gray-500'}`}
                            >
                                {cart.length === 0 ? 'è«‹å…ˆé»é¤' : 'é€™æ˜¯æˆ‘è¦åƒçš„ï¼'}
                            </button>
                        </div>
                    </div>
                );
            }

            // 3. çµå¸³èˆ‡ç¢ºèªé é¢
            if (step === 'checkout') {
                return (
                    <div className="flex flex-col h-screen max-w-md mx-auto bg-white">
                        <div className="bg-green-600 text-white p-4 flex items-center">
                            <button onClick={() => setStep('ordering')} className="mr-4 text-3xl font-bold">â†</button>
                            <h2 className="text-2xl font-bold text-center flex-1 mr-8">æœ€å¾Œç¢ºèª</h2>
                        </div>

                        <div className="flex-1 p-6 overflow-y-auto space-y-8 bg-gray-50">
                            {/* è¨‚å–®æ˜ç´° */}
                            <div className="bg-white p-4 rounded-3xl shadow-sm border border-gray-200">
                                <h3 className="text-gray-400 font-bold mb-3 border-b pb-2">æˆ‘çš„é»é¤å…§å®¹</h3>
                                {cart.map(item => (
                                    <div key={item.id} className="flex justify-between items-center mb-2">
                                        <span className="text-xl font-bold text-gray-700">{item.name} x {item.qty}</span>
                                        <span className="text-lg text-gray-500">${item.price * item.qty}</span>
                                    </div>
                                ))}
                                <div className="text-right text-2xl font-black text-red-600 mt-4 border-t pt-2">
                                    ç¸½é¡ï¼š${total}
                                </div>
                            </div>

                            {/* å–é¤æ–¹å¼ */}
                            <div>
                                <h3 className="text-2xl font-black mb-4 flex items-center">
                                    <span className="bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center mr-2 text-sm">1</span>
                                    åœ¨å“ªè£¡åƒï¼Ÿ
                                </h3>
                                <div className="grid grid-cols-2 gap-4">
                                    <button 
                                        onClick={() => setIsTakeout(false)}
                                        className={`py-8 rounded-3xl border-4 text-2xl font-bold btn-active ${isTakeout === false ? 'border-blue-600 bg-blue-50 text-blue-600 shadow-inner' : 'border-gray-200 text-gray-400 bg-white'}`}
                                    >
                                        é€™è£¡åƒ
                                    </button>
                                    <button 
                                        onClick={() => setIsTakeout(true)}
                                        className={`py-8 rounded-3xl border-4 text-2xl font-bold btn-active ${isTakeout === true ? 'border-blue-600 bg-blue-50 text-blue-600 shadow-inner' : 'border-gray-200 text-gray-400 bg-white'}`}
                                    >
                                        å¸¶å›å®¶
                                    </button>
                                </div>
                            </div>

                            {/* ä»˜æ¬¾æ–¹å¼ */}
                            <div>
                                <h3 className="text-2xl font-black mb-4 flex items-center">
                                    <span className="bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center mr-2 text-sm">2</span>
                                    æ€éº¼ä»˜éŒ¢ï¼Ÿ
                                </h3>
                                <div className="space-y-3">
                                    {['ä»˜ç¾é‡‘', 'æ‚ éŠå¡'].map(p => (
                                        <button 
                                            key={p} 
                                            onClick={() => setPaymentMethod(p)}
                                            className={`w-full py-6 px-8 text-left rounded-3xl border-4 text-2xl font-bold btn-active ${paymentMethod === p ? 'border-green-600 bg-green-50 text-green-700' : 'border-gray-200 text-gray-400 bg-white'}`}
                                        >
                                            {paymentMethod === p ? 'âœ… ' : 'â­• '} {p}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* é€å‡ºæŒ‰éˆ• */}
                        <div className="p-6 bg-white border-t border-gray-100">
                            <button 
                                onClick={() => setStep('success')}
                                disabled={!paymentMethod || isTakeout === null}
                                className={`w-full py-6 rounded-full text-3xl font-black transition-all shadow-xl btn-active ${paymentMethod && isTakeout !== null ? 'bg-orange-500 text-white shadow-orange-200' : 'bg-gray-300 text-gray-500'}`}
                            >
                                ç¢ºå®šé»é¤ï¼
                            </button>
                        </div>
                    </div>
                );
            }

            // 4. å®Œæˆé é¢
            if (step === 'success') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen bg-green-50 p-6 text-center">
                        <div className="bg-white p-12 rounded-[50px] shadow-2xl w-full max-w-sm border-8 border-green-200">
                            <div className="text-9xl mb-8">ğŸ‰</div>
                            <h2 className="text-5xl font-black text-green-600 mb-6">é»å¥½å›‰ï¼</h2>
                            <p className="text-2xl text-gray-600 mb-12 font-bold leading-relaxed">è«‹ç­‰å¾…æœå‹™å“¡<br/>ç‚ºæ‚¨é€é¤</p>
                            <button 
                                onClick={() => {
                                    setCart([]);
                                    setStep('welcome');
                                    setIsTakeout(null);
                                    setPaymentMethod(null);
                                }} 
                                className="bg-gray-800 text-white text-2xl font-bold py-6 px-12 rounded-full w-full shadow-lg btn-active"
                            >
                                å›é¦–é 
                            </button>
                        </div>
                    </div>
                );
            }

            return null;
        }

        // å•Ÿå‹•æ¸²æŸ“
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
